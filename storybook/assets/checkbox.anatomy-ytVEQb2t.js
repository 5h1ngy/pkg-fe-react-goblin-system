import{l as h,y as L,z as H,A as M,c as N,a as O,b as R,B,C as A,D as G,E as q,F as W,q as a,G as X,e as _,g as $,f as U}from"./use-environment-context-KKmzfobL.js";function j(e){return e.mozInputSource===0&&e.isTrusted?!0:e.detail===0&&!e.pointerType}function Y(e){return!(e.metaKey||!M()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}var J=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function Q(e,o,t){const n=t?H(t):null,d=h(n);return e=e||n instanceof d.HTMLInputElement&&!J.has(n==null?void 0:n.type)||n instanceof d.HTMLTextAreaElement||n instanceof d.HTMLElement&&n.isContentEditable,!(e&&o==="keyboard"&&t instanceof d.KeyboardEvent&&!Reflect.has(Z,t.key))}var l=null,y=new Set,E=new Map,u=!1,C=!1,Z={Tab:!0,Escape:!0};function g(e,o){for(let t of y)t(e,o)}function b(e){u=!0,Y(e)&&(l="keyboard",g("keyboard",e))}function i(e){l="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(u=!0,g("pointer",e))}function P(e){j(e)&&(u=!0,l="virtual")}function D(e){const o=H(e);o===h(o)||o===L(o)||(!u&&!C&&(l="virtual",g("virtual",e)),u=!1,C=!1)}function V(){u=!1,C=!0}function z(e){if(typeof window>"u"||E.get(h(e)))return;const o=h(e),t=L(e);let n=o.HTMLElement.prototype.focus;o.HTMLElement.prototype.focus=function(){l="virtual",g("virtual",null),u=!0,n.apply(this,arguments)},t.addEventListener("keydown",b,!0),t.addEventListener("keyup",b,!0),t.addEventListener("click",P,!0),o.addEventListener("focus",D,!0),o.addEventListener("blur",V,!1),typeof o.PointerEvent<"u"?(t.addEventListener("pointerdown",i,!0),t.addEventListener("pointermove",i,!0),t.addEventListener("pointerup",i,!0)):(t.addEventListener("mousedown",i,!0),t.addEventListener("mousemove",i,!0),t.addEventListener("mouseup",i,!0)),o.addEventListener("beforeunload",()=>{ee(e)},{once:!0}),E.set(o,{focus:n})}var ee=(e,o)=>{const t=h(e),n=L(e);E.has(t)&&(t.HTMLElement.prototype.focus=E.get(t).focus,n.removeEventListener("keydown",b,!0),n.removeEventListener("keyup",b,!0),n.removeEventListener("click",P,!0),t.removeEventListener("focus",D,!0),t.removeEventListener("blur",V,!1),typeof t.PointerEvent<"u"?(n.removeEventListener("pointerdown",i,!0),n.removeEventListener("pointermove",i,!0),n.removeEventListener("pointerup",i,!0)):(n.removeEventListener("mousedown",i,!0),n.removeEventListener("mousemove",i,!0),n.removeEventListener("mouseup",i,!0)),E.delete(t))};function T(){return l==="keyboard"}function te(e={}){const{isTextInput:o,autoFocus:t,onChange:n,root:d}=e;z(d),n==null||n({isFocusVisible:t||T(),modality:l});const s=(f,v)=>{Q(!!o,f,v)&&(n==null||n({isFocusVisible:T(),modality:f}))};return y.add(s),()=>{y.delete(s)}}var K=_("checkbox").parts("root","label","control","indicator"),k=K.build(),r=R({getRootId:e=>{var o;return((o=e.ids)==null?void 0:o.root)??`checkbox:${e.id}`},getLabelId:e=>{var o;return((o=e.ids)==null?void 0:o.label)??`checkbox:${e.id}:label`},getControlId:e=>{var o;return((o=e.ids)==null?void 0:o.control)??`checkbox:${e.id}:control`},getHiddenInputId:e=>{var o;return((o=e.ids)==null?void 0:o.hiddenInput)??`checkbox:${e.id}:input`},getRootEl:e=>r.getById(e,r.getRootId(e)),getHiddenInputEl:e=>r.getById(e,r.getHiddenInputId(e))});function re(e,o,t){const n=e.context.isDisabled,d=e.context.readOnly,s=!n&&e.context.focused,f=!n&&e.context.focusVisible,v=e.context.isChecked,m=e.context.isIndeterminate,p={"data-active":a(e.context.active),"data-focus":a(s),"data-focus-visible":a(f),"data-readonly":a(d),"data-hover":a(e.context.hovered),"data-disabled":a(n),"data-state":m?"indeterminate":e.context.checked?"checked":"unchecked","data-invalid":a(e.context.invalid)};return{checked:v,disabled:n,indeterminate:m,focused:s,checkedState:e.context.checked,setChecked(c){o({type:"CHECKED.SET",checked:c,isTrusted:!1})},toggleChecked(){o({type:"CHECKED.TOGGLE",checked:v,isTrusted:!1})},getRootProps(){return t.label({...k.root.attrs,...p,dir:e.context.dir,id:r.getRootId(e.context),htmlFor:r.getHiddenInputId(e.context),onPointerMove(){n||o({type:"CONTEXT.SET",context:{hovered:!0}})},onPointerLeave(){n||o({type:"CONTEXT.SET",context:{hovered:!1}})},onClick(c){H(c)===r.getHiddenInputEl(e.context)&&c.stopPropagation()}})},getLabelProps(){return t.element({...k.label.attrs,...p,dir:e.context.dir,id:r.getLabelId(e.context)})},getControlProps(){return t.element({...k.control.attrs,...p,dir:e.context.dir,id:r.getControlId(e.context),"aria-hidden":!0})},getIndicatorProps(){return t.element({...k.indicator.attrs,...p,dir:e.context.dir,hidden:!m&&!e.context.checked})},getHiddenInputProps(){return t.input({id:r.getHiddenInputId(e.context),type:"checkbox",required:e.context.required,defaultChecked:v,disabled:n,"aria-labelledby":r.getLabelId(e.context),"aria-invalid":e.context.invalid,name:e.context.name,form:e.context.form,value:e.context.value,style:X,onFocus(){const c=T();o({type:"CONTEXT.SET",context:{focused:!0,focusVisible:c}})},onBlur(){o({type:"CONTEXT.SET",context:{focused:!1,focusVisible:!1}})},onClick(c){if(d){c.preventDefault();return}const F=c.currentTarget.checked;o({type:"CHECKED.SET",checked:F,isTrusted:!0})}})}}}var{not:w}=W;function ie(e){const o=N(e);return O({id:"checkbox",initial:"ready",context:{checked:!1,value:"on",disabled:!1,...o,fieldsetDisabled:!1,focusVisible:!1},watch:{disabled:"removeFocusIfNeeded",checked:"syncInputElement"},activities:["trackFormControlState","trackPressEvent","trackFocusVisible"],on:{"CHECKED.TOGGLE":[{guard:w("isTrusted"),actions:["toggleChecked","dispatchChangeEvent"]},{actions:["toggleChecked"]}],"CHECKED.SET":[{guard:w("isTrusted"),actions:["setChecked","dispatchChangeEvent"]},{actions:["setChecked"]}],"CONTEXT.SET":{actions:["setContext"]}},computed:{isIndeterminate:t=>I(t.checked),isChecked:t=>S(t.checked),isDisabled:t=>!!t.disabled||t.fieldsetDisabled},states:{ready:{}}},{guards:{isTrusted:(t,n)=>!!n.isTrusted},activities:{trackPressEvent(t){if(!t.isDisabled)return q({pointerNode:r.getRootEl(t),keyboardNode:r.getHiddenInputEl(t),isValidKey:n=>n.key===" ",onPress:()=>t.active=!1,onPressStart:()=>t.active=!0,onPressEnd:()=>t.active=!1})},trackFocusVisible(t){if(!t.isDisabled)return te({root:r.getRootNode(t)})},trackFormControlState(t,n,{send:d,initialContext:s}){return G(r.getHiddenInputEl(t),{onFieldsetDisabledChange(f){t.fieldsetDisabled=f},onFormReset(){d({type:"CHECKED.SET",checked:!!s.checked})}})}},actions:{setContext(t,n){Object.assign(t,n.context)},syncInputElement(t){const n=r.getHiddenInputEl(t);n&&(A(n,t.isChecked),n.indeterminate=t.isIndeterminate)},removeFocusIfNeeded(t){t.disabled&&t.focused&&(t.focused=!1,t.focusVisible=!1)},setChecked(t,n){x.checked(t,n.checked)},toggleChecked(t){const n=I(t.checked)?!0:!t.checked;x.checked(t,n)},dispatchChangeEvent(t){const n=r.getHiddenInputEl(t);B(n,{checked:S(t.checked)})}}})}function I(e){return e==="indeterminate"}function S(e){return I(e)?!1:!!e}var ne={change:e=>{var o;(o=e.onCheckedChange)==null||o.call(e,{checked:e.checked})}},x={checked:(e,o)=>{$(e.checked,o)||(e.checked=o,ne.change(e))}};U()(["checked","dir","disabled","form","getRootNode","id","ids","invalid","name","onCheckedChange","readOnly","required","value"]);const de=K.extendWith("group");export{re as a,de as c,ie as m};
