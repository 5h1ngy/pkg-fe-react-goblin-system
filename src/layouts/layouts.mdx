import { Meta } from '@storybook/addon-docs';

<Meta title="layouts/Introduction" />

# Introduzione ai Layouts

Questa sezione raccoglie i **tre layout** principali del tuo progetto:

1. **Error** – Viene utilizzato per gestire errori o schermate di fallback.
2. **Loading** – Mostra una schermata di caricamento globale.
3. **Transformer** – Un layout più elaborato, con animazioni GSAP, router e logica contestuale.

---

## Struttura delle cartelle

La struttura di massima in `src/layouts` è la seguente (semplificata):

```
src/
└── layouts/
    ├── Error/
    │   ├── Error.tsx
    │   └── index.ts
    ├── Loading/
    │   ├── Loading.tsx
    │   └── index.ts
    └── Transformer/
        ├── Header.tsx
        ├── Body.tsx
        ├── Transformer.tsx
        ├── index.ts
        └── shared/
            ├── Provider.tsx
            └── ...
```

Ciascuna cartella contiene un `index.ts` come entrypoint (re-export), da importare direttamente nelle storie.

---

## Error Layout

Il **layout Error** visualizza uno stato di errore o fallback quando qualcosa non va come previsto.  
In genere contiene:
- Un componente `EmptyState` con icona e messaggio di errore.
- Uno stile a schermo intero con **Flex** di Chakra UI che centra il contenuto.

**Uso tipico**:

```tsx
import ErrorLayout from '@/layouts/Error';

function App() {
  return (
    // ...
    <ErrorLayout />
  );
}
```

---

## Loading Layout

Il **layout Loading** mostra una schermata di caricamento globale, utile per fasi di fetch iniziale o routing asincrono.  
Utilizza:
- Un’icona di caricamento (Loader).
- Una barra di progresso/indicatore.

**Uso tipico**:
```tsx
import LoadingLayout from '@/layouts/Loading';

function App() {
  return (
    // ...
    <LoadingLayout />
  );
}
```

---

## Transformer Layout

Il **layout Transformer** è più complesso e fa uso di:
- `react-router-dom` (hook `useLocation`, `useNavigate`, ecc.).
- Contesto personalizzato (`Provider.tsx`) che espone `navbarItems`, `background`, ecc.
- Animazioni GSAP (un **cerchio** che segue il mouse, transizioni sulle sezioni).
- Un `Header` con logica di navigazione, una sezione `Body` per il contenuto, e uno **sfondo** personalizzabile.

### Punti Chiave

1. **Router Context**: per funzionare correttamente, in Storybook bisogna avvolgere i componenti in un _Router_ (ad esempio `MemoryRouter`).  
2. **Navbar Items**: puoi passare array di item (`navbarItems`, `navbarSubItems`) per popolare il menu di navigazione.
3. **Background**: puoi configurare un’immagine di sfondo (anche differenziata per modalità scura) e gestire il blur con la prop `opacity`.

**Uso tipico**:
```tsx
import TransformerLayout from '@/layouts/Transformer';

function App() {
  return (
    <TransformerLayout
      navigationScroll
      navbarItems={[{ icon: '🏠', label: 'Home', value: '/home' }]}
      background={{
        opacity: 10,
        image: 'white_background.png',
        imageDark: 'dark_background.png',
      }}
    >
      <div>Contenuto Principale</div>
    </TransformerLayout>
  );
}
```

---

## Suggerimenti per l’uso in Storybook

- **Router Decorator**: Se il tuo layout utilizza `react-router-dom`, includi un decorator con `MemoryRouter` o `BrowserRouter`.  
  Esempio (in un file `.stories.tsx` o `.stories.mdx`):
  ```tsx
  decorators: [
    (Story) => (
      <MemoryRouter>
        <Story />
      </MemoryRouter>
    ),
  ],
  ```
- **Argomenti (Args)**: Se vuoi testare diverse configurazioni di background, navbar, ecc., sfrutta gli argomenti (args) di Storybook.
- **AutoDocs**: Nelle storie `.stories.tsx`, configura la proprietà `parameters.docs.autodocs = 'tag'` per sfruttare la documentazione automatica.

---

## Prossimi passi

Ora che conosci la struttura e le funzionalità base dei layout:
- Esplora le storie per ciascuno di essi, nella sezione `layouts/` della sidebar di Storybook.
- Personalizza i **props** nelle storie per testare diverse varianti.
- Integra i layout nelle tue pagine e verifica come si comportano in diverse modalità (desktop/mobile).

Se riscontri errori legati a provider o contesti, assicurati di aver configurato correttamente i **decorators** di Storybook.

---

**Buona esplorazione!**  
Sfrutta questi layout come fondamenta per gestire stati globali di errore, caricamento e viste animate personalizzabili.  
Per ulteriori dettagli, fai riferimento alle storie specifiche di ogni layout o alla documentazione interna del tuo progetto.
```