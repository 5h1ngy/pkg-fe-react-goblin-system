import{jsxs as e,jsx as r,Fragment as t}from"react/jsx-runtime";import{useForm as n,Controller as a,FormProvider as i}from"react-hook-form";import{Field as o,Checkbox as l,VStack as s,Input as c,Flex as d,Button as m,AbsoluteCenter as h,Spinner as u,Span as p,HStack as f,Table as g,createRecipeContext as b,createContext as w,Pagination as v,usePaginationContext as y,IconButton as C,Text as k,Portal as S,ActionBar as x,Kbd as j,Stack as I,Card as _,Image as L,Heading as z,Skeleton as A,Circle as R,Avatar as E,Group as T,Icon as D,Spacer as N}from"@chakra-ui/react";import{zodResolver as U}from"@hookform/resolvers/zod";import{ZodOptional as P,ZodNullable as O,ZodDefault as $,ZodArray as F,ZodEffects as H,z as B,ZodEnum as W}from"zod";import{Select as M}from"chakra-react-select";import{forwardRef as G,createContext as Z,useState as Y,useContext as q,useMemo as V,useEffect as X}from"react";import{HiMiniEllipsisHorizontal as J,HiChevronLeft as K,HiChevronRight as Q}from"react-icons/hi2";import{C as ee,E as re}from"../empty-state-BgGSEQVU.js";import{CiFolderOff as te}from"react-icons/ci";import ne from"react-markdown";import ae from"remark-gfm";import ie from"rehype-highlight";import"react-icons/lu";const oe=e=>{let r=-1/0;const t=e.shape;for(const e in t){const n=t[e]?.meta;void 0!==n?.step&&n?.step>r&&(r=n.step)}return r===-1/0?0:r};const le=G((function(t,n){const{label:a,children:i,helperText:l,errorText:s,optionalText:c,...d}=t;return e(o.Root,{ref:n,...d,children:[a&&e(o.Label,{children:[a,r(o.RequiredIndicator,{fallback:c})]}),i,l&&r(o.HelperText,{children:l}),s&&r(o.ErrorText,{children:s})]})})),se=G((function(t,n){const{icon:a,children:i,inputProps:o,rootRef:s,...c}=t;return e(l.Root,{ref:s,...c,children:[r(l.HiddenInput,{ref:n,...o}),r(l.Control,{children:a||r(l.Indicator,{})}),null!=i&&r(l.Label,{children:i})]})}));function ce({methods:e,name:n,meta:i,fieldSchema:o}){const l=function(e){for(;;)if(e instanceof P||e instanceof O)e=e.unwrap();else if(e instanceof $)e=e.removeDefault();else if(e instanceof F)e=e.element;else{if(!(e instanceof H))break;e=e.innerType()}return e}(o);return r(a,{name:n,control:e.control,render:({field:a})=>function(a){if(l instanceof B.ZodString||l instanceof B.ZodDate)return r(s,{...i?.style?{...i?.style}:{width:"100%"},alignItems:"left",children:r(le,{label:i?.label&&i.label,invalid:void 0!==e.formState.errors[n],errorText:e.formState.errors[n]?.message,children:r(c,{disabled:a.disabled,type:(o=n,l instanceof B.ZodString&&o.toLowerCase().includes("password")?"password":l instanceof B.ZodString&&o.toLowerCase().includes("email")?"email":l instanceof B.ZodDate?"date":"text"),ref:a.ref,id:n,name:n,autoComplete:i?.autocomplete??"",onBlur:a.onBlur,onChange:a.onChange,value:a.value??""})})});if(l instanceof W){const e=l.options.map(((e,r)=>({label:i?.labels?.[r]??"",value:e??null})));return r(le,{label:i?.label&&i.label,children:r(M,{...a,options:e,value:e.find((e=>e.value===a.value))||null,onChange:e=>a.onChange(e?e.value:null),placeholder:i?.label?`Select ${i?.label}`:void 0,defaultValue:null})})}return l instanceof B.ZodBoolean?r(le,{invalid:void 0!==e.formState.errors[n],errorText:e.formState.errors[n]?.message,children:r(se,{...a,variant:"solid",disabled:a.disabled,id:n,name:n,checked:a.value??!1,onCheckedChange:({checked:e})=>a.onChange(e),children:i?.label})}):r(t,{});var o}(a)},crypto.randomUUID())}function de(e,r){const t=e;return r&&(t.meta=r||{}),t}function me({width:a,schema:o,defaultValues:l,step:s=0,onNext:c,onBack:m,render:h}){const{fields:u,methods:p}=function(e,r){const t=n({resolver:U(e),defaultValues:r});return{fields:e.innerType().shape?Object.entries(e.innerType().shape).reduce(((e,[r,t])=>{const n=t,a=n.meta?.step||0,i=n.meta?.row?.toString()||"__NO_ROW__",o=[r,t];if(e[a]||(e[a]={}),e[a][`${i}`]){const r=e[a][`${i}`];e[a][`${i}`]=[...r,o]}else e[a][`${i}`]=[o];return e}),[]):[],methods:t}}(o,l),f=0!==u.length?Object.entries(u[s]??{}).flatMap((([e,r])=>r.map((([e])=>e)))):[],g=0!==u.length?Object.entries(u[s]??{}).map((([e,t])=>"__NO_ROW__"===e?t.map((([e,t])=>r(ce,{methods:p,name:e,meta:t.meta??void 0,fieldSchema:t},crypto.randomUUID()))):r(d,{width:"100%",direction:"row",gap:"0.8rem",justifyContent:"start",children:t.map((([e,t])=>r(ce,{methods:p,name:e,meta:t.meta??void 0,fieldSchema:t},crypto.randomUUID())))},crypto.randomUUID()))):[];return r(d,{flexDirection:"column",width:a,children:r(i,{...p,children:h?h(g,p.handleSubmit,(async function(){if(await p.trigger(f)){const e=oe(o.innerType()),r=s+1;c(r,r<=e&&r===e)}}),(async function(){oe(o.innerType());const e=s-1;m(e,!1)})):e(t,{children:[g,r("button",{type:"submit",children:"Invia"})]})})})}const he=G((function(n,a){const{loading:i,disabled:o,loadingText:l,children:s,...c}=n;return r(m,{disabled:i||o,ref:a,...c,children:i&&!l?e(t,{children:[r(h,{display:"inline-flex",children:r(u,{size:"inherit",color:"inherit"})}),r(p,{opacity:0,children:s})]}):i&&l?e(t,{children:[r(u,{size:"inherit",color:"inherit"}),l]}):s})}));function ue(e){if(!e)return"";let r=e.replace(/([A-Z])/g," $1");return r=r.trim(),r.charAt(0).toUpperCase()+r.slice(1)}const pe=Z(void 0),fe=()=>{const e=q(pe);if(!e)throw new Error("useTableContext must be used within LiquidTable");return e},ge=()=>{const{columns:t,rows:n,select:a}=fe(),i=a.selection.length>0&&a.selection.length<n.length;return r(g.Header,{children:e(g.Row,{bg:"bg.subtle",children:[r(g.ColumnHeader,{w:"6",children:r(se,{top:"1","aria-label":"Select all rows",checked:i?"indeterminate":a.selection.length>0,onCheckedChange:e=>e.checked?a.setSelection(n.map((e=>e.id))):a.setSelection([])})}),t.filter((e=>e.visible)).map((e=>r(g.ColumnHeader,{textAlign:e.isNumeric?"end":"start",children:e.label},crypto.randomUUID())))]})})},be=()=>{const{columns:t,rows:n,select:a}=fe();return r(g.Body,{children:n.map((n=>e(g.Row,{children:[r(g.Cell,{children:r(se,{top:"1","aria-label":"Select row",checked:a.selection.includes(n.id),onCheckedChange:e=>a.setSelection((r=>e.checked?[...r,n.id]:r.filter((e=>e!==n.id))))})}),t.filter((e=>e.visible)).map((e=>r(g.Cell,{textAlign:e.isNumeric?"end":"start",children:null==n.data[e.field]?"/":n.data[e.field]},crypto.randomUUID())))]},crypto.randomUUID())))})},{withContext:we}=b({key:"button"}),ve=we("a"),[ye,Ce]=w({name:"RootPropsProvider"}),ke={outline:{default:"ghost",ellipsis:"plain",current:"outline"},solid:{default:"outline",ellipsis:"outline",current:"solid"},subtle:{default:"ghost",ellipsis:"plain",current:"subtle"}},Se=G((function(e,t){const{size:n="sm",variant:a="outline",getHref:i,...o}=e;return r(ye,{value:{size:n,variantMap:ke[a],getHref:i},children:r(v.Root,{ref:t,type:i?"link":"button",...o})})})),xe=G((function(e,t){const{size:n,variantMap:a}=Ce();return r(v.Ellipsis,{ref:t,...e,asChild:!0,children:r(m,{as:"span",variant:a.ellipsis,size:n,children:r(J,{})})})})),je=G((function(e,t){const{page:n}=y(),{size:a,variantMap:i,getHref:o}=Ce(),l=n===e.value?i.current:i.default;return o?r(ve,{href:o(e.value),variant:l,size:a,children:e.value}):r(v.Item,{ref:t,...e,asChild:!0,children:r(m,{variant:l,size:a,children:e.value})})})),Ie=G((function(e,t){const{size:n,variantMap:a,getHref:i}=Ce(),{previousPage:o}=y();return i?r(ve,{href:null!=o?i(o):void 0,variant:a.default,size:n,children:r(K,{})}):r(v.PrevTrigger,{ref:t,asChild:!0,...e,children:r(C,{variant:a.default,size:n,children:r(K,{})})})})),_e=G((function(e,t){const{size:n,variantMap:a,getHref:i}=Ce(),{nextPage:o}=y();return i?r(ve,{href:null!=o?i(o):void 0,variant:a.default,size:n,children:r(Q,{})}):r(v.NextTrigger,{ref:t,asChild:!0,...e,children:r(C,{variant:a.default,size:n,children:r(Q,{})})})})),Le=e=>r(v.Context,{children:({pages:t})=>t.map(((t,n)=>"ellipsis"===t.type?r(xe,{index:n,...e},n):r(je,{type:"page",value:t.value,...e},n)))});G((function(e,t){const{format:n="compact",...a}=e,{page:i,pages:o,pageRange:l,count:s}=y(),c=V((()=>"short"===n?`${i} / ${o.length}`:"compact"===n?`${i} of ${o.length}`:`${l.start+1} - ${l.end} of ${s}`),[n,i,o.length,l,s]);return r(k,{fontWeight:"medium",ref:t,...a,children:c})}));const ze=()=>{const{pagination:t}=fe();return t&&r(Se,{padding:"0.3rem",count:t.totalPages,width:"fit-content",pageSize:t.size,page:t.offset,borderRadius:"10px",backgroundColor:"gray.100",_dark:{backgroundColor:"gray.950"},children:e(f,{wrap:"wrap",children:[r(Ie,{}),r(Le,{}),r(_e,{})]})})},Ae=G((function(e,t){const{children:n,portalled:a=!0,portalRef:i,...o}=e;return r(S,{disabled:!a,container:i,children:r(x.Positioner,{children:r(x.Content,{ref:t,...o,asChild:!1,children:n})})})}));G((function(e,t){return r(x.CloseTrigger,{...e,asChild:!0,ref:t,children:r(ee,{size:"sm"})})}));const Re=x.Root,Ee=x.SelectionTrigger,Te=x.Separator,De=()=>{const{select:t}=fe(),n=t.selection.length>0;return X((()=>{const e=document.getElementsByClassName("chakra-action-bar__positioner");for(let r=0;r<e.length;r++)e[r].style.zIndex="9999"}),[]),r(Re,{open:n,children:e(Ae,{children:[e(Ee,{children:[t.selection.length," selected"]}),r(Te,{}),e(he,{variant:"outline",size:"sm",children:["Delete ",r(j,{children:"⌫"})]}),e(he,{variant:"outline",size:"sm",children:["Share ",r(j,{children:"T"})]})]})})};var Ne,Ue=(Ne=()=>e(I,{width:"full",gap:"3",alignItems:"flex-end",children:[r(ze,{}),r(g.ScrollArea,{borderWidth:"1px",rounded:"md",width:"100%",height:"100%",children:e(g.Root,{size:"lg",stickyHeader:!0,interactive:!0,children:[r(ge,{}),r(be,{})]})}),r(De,{})]}),e=>{const{columns:t,rows:n}=function(e,r=[]){if(!e||0===e.length)return{columns:[],rows:[]};const t=new Set;e.forEach((e=>{Object.keys(e).forEach((e=>t.add(e)))}));const n=Array.from(t).map((e=>{const t=r.includes(e);return{field:e,label:ue(e),visible:!t,isNumeric:!1}})),a=e.map(((e,r)=>({id:e.id??String(r),data:e})));return{columns:n,rows:a}}(e.items,e.hiddenFields),[a,i]=Y([]);return r(pe.Provider,{value:{columns:t,rows:n,pagination:e.pagination,select:{selection:a,setSelection:i}},children:r(Ne,{...e})})});const Pe=B.object({id:de(B.string().trim(),{label:"Email/Username",autocomplete:"username"}),password:de(B.string().min(6,{message:"La password deve contenere almeno 6 caratteri"}),{label:"Password",autocomplete:"password"}),stay_logged:de(B.boolean().default(!1),{label:"Stay logged"})}).superRefine(((e,r)=>{}));Pe.innerType();const Oe=B.object({first_name:de(B.string().trim().min(2,{message:"Il nome deve contenere almeno 2 caratteri"}).max(50,{message:"Il nome non può superare i 50 caratteri"}),{label:"Nome",autocomplete:"first-name",row:"row-1",step:0}),last_name:de(B.string().trim().min(2,{message:"Il cognome deve contenere almeno 2 caratteri"}).max(50,{message:"Il cognome non può superare i 50 caratteri"}),{label:"Cognome",autocomplete:"last-name",row:"row-1",step:0}),bday:de(B.coerce.date({required_error:"La data di nascita è obbligatoria",invalid_type_error:"Formato data non valido"}).max(new Date,{message:"La data non può essere nel futuro"}).transform((e=>e.getTime())),{label:"Data di Nascita",autocomplete:"bday",row:"row-2",step:0}),username:de(B.string().trim(),{label:"Nickname",autocomplete:"username",step:1,style:{width:{sm:"20rem"}}}),gender:de(B.enum(["male","female"]).nullable().default(null),{label:"Gender",labels:["Male","Female"],autocomplete:"gender",step:1,style:{width:{sm:"20rem"}}}),email:de(B.string().trim().toLowerCase().email({message:"Inserisci un’email valida"}),{label:"Email",autocomplete:"email",row:"row-3",step:2}),confirm_email:de(B.string().trim().toLowerCase().email({message:"Inserisci un’email valida"}),{label:"Ripeti Email",autocomplete:"confirm-email",row:"row-3",step:2}),password:de(B.string().trim().min(6,{message:"La password deve contenere almeno 6 caratteri"}).max(100,{message:"La password non può superare i 100 caratteri"}).regex(/[A-Z]/,{message:"La password deve contenere almeno una lettera maiuscola"}).regex(/\d/,{message:"La password deve contenere almeno un numero"}),{label:"Password",autocomplete:"password",row:"row-4",step:2}),confirm_password:de(B.string().trim().min(6,{message:"La password deve contenere almeno 6 caratteri"}).max(100,{message:"La password non può superare i 100 caratteri"}),{label:"Ripeti Password",autocomplete:"confirm-password",row:"row-4",step:2})}).superRefine(((e,r)=>{e.email!==e.confirm_email&&r.addIssue({code:B.ZodIssueCode.custom,message:"Le email non coincidono.",path:["confirm_email"]}),e.password!==e.confirm_password&&r.addIssue({code:B.ZodIssueCode.custom,message:"Le password non coincidono.",path:["confirm_password"]})}));Oe.innerType();const $e=e=>{const{size:t,...n}=e;return r(R,{size:t,asChild:!0,children:r(A,{...n})})},Fe=G((function(e,t){const{noOfLines:n=3,gap:a,...i}=e;return r(I,{gap:a,width:"full",ref:t,children:Array.from({length:n}).map(((t,n)=>r(A,{height:"4",...e,_last:{maxW:"80%"},...i},n)))})})),He=A,Be=G((function(t,n){const{name:a,src:i,srcSet:o,loading:l,icon:s,fallback:c,children:d,...m}=t;return e(E.Root,{ref:n,...m,children:[r(We,{name:a,icon:s,children:c}),r(E.Image,{src:i,srcSet:o,loading:l}),d]})})),We=G((function(n,a){const{name:i,icon:o,children:l,...s}=n;return e(E.Fallback,{ref:a,...s,children:[l,null!=i&&null==l&&r(t,{children:Me(i)}),null==i&&null==l&&r(E.Icon,{asChild:!!o,children:o})]})}));function Me(e){const r=e.trim().split(" "),t=null!=r[0]?r[0]:"",n=r.length>1?r[r.length-1]:"";return t&&n?`${t.charAt(0)}${n.charAt(0)}`:t.charAt(0)}var Ge;G((function(e,t){const{size:n,variant:a,borderless:i,...o}=e;return r(E.PropsProvider,{value:{size:n,variant:a,borderless:i},children:r(T,{gap:"0",spaceX:"-3",ref:t,...o})})})),function(e){e[e.IDLE=0]="IDLE",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILED=3]="FAILED"}(Ge||(Ge={}));function Ze(e,r){void 0===r&&(r={});var t=r.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===t&&n.firstChild?n.insertBefore(a,n.firstChild):n.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}Ze("pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}\n/*!\n  Theme: GitHub\n  Description: Light theme as seen on github.com\n  Author: github.com\n  Maintainer: @Hirse\n  Updated: 2021-05-15\n\n  Outdated base version: https://github.com/primer/github-syntax-light\n  Current colors taken from GitHub's CSS\n*/.hljs{background:#fff;color:#24292e}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#d73a49}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#6f42c1}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-variable{color:#005cc5}.hljs-meta .hljs-string,.hljs-regexp,.hljs-string{color:#032f62}.hljs-built_in,.hljs-symbol{color:#e36209}.hljs-code,.hljs-comment,.hljs-formula{color:#6a737d}.hljs-name,.hljs-quote,.hljs-selector-pseudo,.hljs-selector-tag{color:#22863a}.hljs-subst{color:#24292e}.hljs-section{color:#005cc5;font-weight:700}.hljs-bullet{color:#735c0f}.hljs-emphasis{color:#24292e;font-style:italic}.hljs-strong{color:#24292e;font-weight:700}.hljs-addition{background-color:#f0fff4;color:#22863a}.hljs-deletion{background-color:#ffeef0;color:#b31d28}");Ze(".markdown-container p{line-height:1.6;margin:1em 0}.markdown-container ol,.markdown-container ul{margin:1em 0;padding-left:1.5em}.markdown-container h1,.markdown-container h2,.markdown-container h3{margin:1.5em 0 1em}");var Ye={DynamicForm:me,LiquidSearchForm:function({schema:t}){return r(me,{schema:t,width:"100%",render:t=>e(s,{gap:"1rem",padding:"1.5rem",borderRadius:"10px",backgroundColor:"gray.100",_dark:{backgroundColor:"gray.950"},children:[r(f,{gap:"4",width:"100%",children:t}),r(s,{gap:"4",width:"100%",alignItems:"flex-end",children:r(he,{variant:"outline",type:"submit",colorPalette:"teal",children:"Crea Account"})})]})})},LiquidTable:Ue,LoginForm:({header:n,submit:a,children:i,root:o})=>r(_.Root,{borderRadius:"10px",...o,children:e(f,{gap:"1rem",padding:"2rem",justifyContent:"center",children:[r(L,{borderRadius:"10px",display:{base:"none",lg:"block"},objectFit:"cover",height:"15rem",src:`${import.meta.env.VITE_BASENAME}/assets/background_card_login.png`,alt:""}),e(s,{children:[e(s,{children:[r(z,{textStyle:"4xl",children:"Login"}),n]}),r(me,{schema:Pe,render:(n,o)=>e(t,{children:[r(_.Body,{children:r(I,{gap:"4",width:{md:"fit-content"},children:n})}),r(_.Footer,{justifyContent:"center",paddingY:"1rem",children:r(he,{onClick:o(a),variant:"solid",width:"100%",children:"Accedi"})}),i]})})]})]})}),RegisterForm:({rootStyle:n,children:a,submit:i})=>{const[o,l]=Y(0),[c,d]=Y(!1);return r(_.Root,{flexDirection:"row",borderRadius:"10px",...n,children:e(f,{gap:"1rem",padding:"2rem",justifyContent:"center",children:[r(L,{borderRadius:"10px",display:{base:"none",lg:"block"},objectFit:"cover",height:"15rem",src:`${import.meta.env.VITE_BASENAME}/assets/background_card_register.png`,alt:""}),e(s,{children:[e(s,{children:[r(z,{textStyle:"4xl",children:"Registrazione"}),a]}),r(me,{schema:Oe,step:o,onNext:async function(e,r){l(e),d(r)},onBack:async function(e,r){l(e),d(r)},render:(n,a,l,s)=>e(t,{children:[r(_.Body,{children:r(I,{gap:"4",width:{md:"fit-content"},children:n})}),e(_.Footer,{justifyContent:"flex-end",paddingY:"1rem",flexWrap:"wrap",children:[0!==o&&r(he,{onClick:()=>s(),variant:"outline",colorPalette:"cyan",width:"40%",children:"Indietro"}),r(he,c?{onClick:a(i),variant:"solid",colorPalette:"cyan",width:"40%",children:"Crea Account"}:{onClick:()=>l(),variant:"subtle",colorPalette:"cyan",width:"40%",children:"Avanti"})]})]})})]})]})})},SectionCard:({status:n,isEmpty:a=!0,header:i,subHeader:o,body:l,empty:c})=>e(s,{gapY:"1rem",children:[i&&e(s,{gapY:"1rem",children:[n===Ge.LOADING&&e(t,{children:[(i?.avatar||o)&&e(f,{gapY:"2rem",children:[i?.avatar&&r($e,{size:"20"}),o&&r(Fe,{noOfLines:2,gap:"4",width:"18rem"})]}),r(s,{gapY:"2rem",children:r(He,{width:"25rem",height:"20rem"})})]}),!0!==a&&n!==Ge.LOADING&&n===Ge.SUCCESS&&e(f,{gapX:"1rem",children:[i?.avatar&&r(Be,{size:"2xl",variant:"subtle",name:i.avatar}),i?.title&&r(z,{size:"4xl",children:i.title})]}),!0!==a&&n!==Ge.LOADING&&n===Ge.SUCCESS&&o?.content]}),!0!==a&&n!==Ge.LOADING&&n===Ge.SUCCESS&&r(d,{direction:"column",...!l.disableStyle&&{borderRadius:"10px",borderWidth:"1px",backgroundColor:"gray.100",_dark:{backgroundColor:"gray.950"},height:"fit-content",padding:"2rem",gapY:"1rem",justifyContent:"start"},...l.style,children:l.content}),a&&n!==Ge.LOADING&&(n===Ge.SUCCESS||n===Ge.FAILED)&&c&&r(re,{icon:c.icon?r(D,{as:te}):void 0,title:c.title??"No results found",description:c.description??void 0})]}),SectionCardRow:({field:t,value:n})=>t?e(d,{wrap:"wrap",gapX:"5rem",justifyContent:"space-between",children:[r(k,{textStyle:"lg",style:{wordWrap:"break-word",overflowWrap:"break-word",whiteSpace:"normal"},children:t}),r(N,{}),r(k,{textStyle:"lg",style:{wordWrap:"break-word",overflowWrap:"break-word",whiteSpace:"normal"},children:n})]}):r(k,{textStyle:"lg",style:{wordWrap:"break-word",overflowWrap:"break-word",whiteSpace:"normal"},children:n}),StyledMarkdown:({content:t})=>e("div",{className:"markdown-container",children:[" ",r(ne,{children:t,remarkPlugins:[ae],rehypePlugins:[ie]})]})};export{Ye as default};
