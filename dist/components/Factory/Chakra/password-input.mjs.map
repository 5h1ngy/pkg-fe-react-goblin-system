{"version":3,"file":"password-input.mjs","sources":["../../../../src/components/Factory/Chakra/password-input.tsx"],"sourcesContent":["\r\n\r\nimport type {\r\n  ButtonProps,\r\n  GroupProps,\r\n  InputProps,\r\n  StackProps,\r\n} from \"@chakra-ui/react\"\r\nimport {\r\n  Box,\r\n  HStack,\r\n  IconButton,\r\n  Input,\r\n  Stack,\r\n  mergeRefs,\r\n  useControllableState,\r\n} from \"@chakra-ui/react\"\r\nimport { forwardRef, useRef } from \"react\"\r\nimport { LuEye, LuEyeOff } from \"react-icons/lu\"\r\nimport { InputGroup } from \"./input-group\"\r\n\r\nexport interface PasswordVisibilityProps {\r\n  defaultVisible?: boolean\r\n  visible?: boolean\r\n  onVisibleChange?: (visible: boolean) => void\r\n  visibilityIcon?: { on: React.ReactNode; off: React.ReactNode }\r\n}\r\n\r\nexport interface PasswordInputProps\r\n  extends InputProps,\r\n    PasswordVisibilityProps {\r\n  rootProps?: GroupProps\r\n}\r\n\r\nexport const PasswordInput = forwardRef<HTMLInputElement, PasswordInputProps>(\r\n  function PasswordInput(props, ref) {\r\n    const {\r\n      rootProps,\r\n      defaultVisible,\r\n      visible: visibleProp,\r\n      onVisibleChange,\r\n      visibilityIcon = { on: <LuEye />, off: <LuEyeOff /> },\r\n      ...rest\r\n    } = props\r\n\r\n    const [visible, setVisible] = useControllableState({\r\n      value: visibleProp,\r\n      defaultValue: defaultVisible || false,\r\n      onChange: onVisibleChange,\r\n    })\r\n\r\n    const inputRef = useRef<HTMLInputElement>(null)\r\n\r\n    return (\r\n      <InputGroup\r\n        width=\"full\"\r\n        endElement={\r\n          <VisibilityTrigger\r\n            disabled={rest.disabled}\r\n            onPointerDown={(e) => {\r\n              if (rest.disabled) return\r\n              if (e.button !== 0) return\r\n              e.preventDefault()\r\n              setVisible(!visible)\r\n            }}\r\n          >\r\n            {visible ? visibilityIcon.off : visibilityIcon.on}\r\n          </VisibilityTrigger>\r\n        }\r\n        {...rootProps}\r\n      >\r\n        <Input\r\n          {...rest}\r\n          ref={mergeRefs(ref, inputRef)}\r\n          type={visible ? \"text\" : \"password\"}\r\n        />\r\n      </InputGroup>\r\n    )\r\n  },\r\n)\r\n\r\nconst VisibilityTrigger = forwardRef<HTMLButtonElement, ButtonProps>(\r\n  function VisibilityTrigger(props, ref) {\r\n    return (\r\n      <IconButton\r\n        tabIndex={-1}\r\n        ref={ref}\r\n        me=\"-2\"\r\n        aspectRatio=\"square\"\r\n        size=\"sm\"\r\n        variant=\"ghost\"\r\n        height=\"calc(100% - {spacing.2})\"\r\n        aria-label=\"Toggle password visibility\"\r\n        {...props}\r\n      />\r\n    )\r\n  },\r\n)\r\n\r\ninterface PasswordStrengthMeterProps extends StackProps {\r\n  max?: number\r\n  value: number\r\n}\r\n\r\nexport const PasswordStrengthMeter = forwardRef<\r\n  HTMLDivElement,\r\n  PasswordStrengthMeterProps\r\n>(function PasswordStrengthMeter(props, ref) {\r\n  const { max = 4, value, ...rest } = props\r\n\r\n  const percent = (value / max) * 100\r\n  const { label, colorPalette } = getColorPalette(percent)\r\n\r\n  return (\r\n    <Stack align=\"flex-end\" gap=\"1\" ref={ref} {...rest}>\r\n      <HStack width=\"full\" ref={ref} {...rest}>\r\n        {Array.from({ length: max }).map((_, index) => (\r\n          <Box\r\n            key={index}\r\n            height=\"1\"\r\n            flex=\"1\"\r\n            rounded=\"sm\"\r\n            data-selected={index < value ? \"\" : undefined}\r\n            layerStyle=\"fill.subtle\"\r\n            colorPalette=\"gray\"\r\n            _selected={{\r\n              colorPalette,\r\n              layerStyle: \"fill.solid\",\r\n            }}\r\n          />\r\n        ))}\r\n      </HStack>\r\n      {label && <HStack textStyle=\"xs\">{label}</HStack>}\r\n    </Stack>\r\n  )\r\n})\r\n\r\nfunction getColorPalette(percent: number) {\r\n  switch (true) {\r\n    case percent < 33:\r\n      return { label: \"Low\", colorPalette: \"red\" }\r\n    case percent < 66:\r\n      return { label: \"Medium\", colorPalette: \"orange\" }\r\n    default:\r\n      return { label: \"High\", colorPalette: \"green\" }\r\n  }\r\n}\r\n"],"names":["PasswordInput","jsx","VisibilityTrigger","PasswordStrengthMeter","jsxs"],"mappings":";;;;;AAkCO,MAAM,gBAAgB;AAAA,EAC3B,SAASA,eAAc,OAAO,KAAK;AAC3B,UAAA;AAAA,MACJ;AAAA,MACA;AAAA,MACA,SAAS;AAAA,MACT;AAAA,MACA,iBAAiB,EAAE,IAAIC,kCAAA,IAAC,SAAM,GAAI,KAAMA,kCAAA,IAAA,UAAA,CAAA,CAAS,EAAG;AAAA,MACpD,GAAG;AAAA,IAAA,IACD;AAEJ,UAAM,CAAC,SAAS,UAAU,IAAI,qBAAqB;AAAA,MACjD,OAAO;AAAA,MACP,cAAc,kBAAkB;AAAA,MAChC,UAAU;AAAA,IAAA,CACX;AAEK,UAAA,WAAW,OAAyB,IAAI;AAG5C,WAAAA,kCAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,OAAM;AAAA,QACN,YACEA,kCAAA;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,UAAU,KAAK;AAAA,YACf,eAAe,CAAC,MAAM;AACpB,kBAAI,KAAK,SAAU;AACf,kBAAA,EAAE,WAAW,EAAG;AACpB,gBAAE,eAAe;AACjB,yBAAW,CAAC,OAAO;AAAA,YACrB;AAAA,YAEC,UAAA,UAAU,eAAe,MAAM,eAAe;AAAA,UAAA;AAAA,QACjD;AAAA,QAED,GAAG;AAAA,QAEJ,UAAAA,kCAAA;AAAA,UAAC;AAAA,UAAA;AAAA,YACE,GAAG;AAAA,YACJ,KAAK,UAAU,KAAK,QAAQ;AAAA,YAC5B,MAAM,UAAU,SAAS;AAAA,UAAA;AAAA,QAAA;AAAA,MAC3B;AAAA,IACF;AAAA,EAAA;AAGN;AAEA,MAAM,oBAAoB;AAAA,EACxB,SAASC,mBAAkB,OAAO,KAAK;AAEnC,WAAAD,kCAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,UAAU;AAAA,QACV;AAAA,QACA,IAAG;AAAA,QACH,aAAY;AAAA,QACZ,MAAK;AAAA,QACL,SAAQ;AAAA,QACR,QAAO;AAAA,QACP,cAAW;AAAA,QACV,GAAG;AAAA,MAAA;AAAA,IACN;AAAA,EAAA;AAGN;AAOO,MAAM,wBAAwB,WAGnC,SAASE,uBAAsB,OAAO,KAAK;AAC3C,QAAM,EAAE,MAAM,GAAG,OAAO,GAAG,KAAS,IAAA;AAE9B,QAAA,UAAW,QAAQ,MAAO;AAChC,QAAM,EAAE,OAAO,iBAAiB,gBAAgB,OAAO;AAGrD,SAAAC,uCAAC,SAAM,OAAM,YAAW,KAAI,KAAI,KAAW,GAAG,MAC5C,UAAA;AAAA,IAAAH,kCAAA,IAAC,UAAO,OAAM,QAAO,KAAW,GAAG,MAChC,UAAM,MAAA,KAAK,EAAE,QAAQ,IAAK,CAAA,EAAE,IAAI,CAAC,GAAG,UACnCA,kCAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QAEC,QAAO;AAAA,QACP,MAAK;AAAA,QACL,SAAQ;AAAA,QACR,iBAAe,QAAQ,QAAQ,KAAK;AAAA,QACpC,YAAW;AAAA,QACX,cAAa;AAAA,QACb,WAAW;AAAA,UACT;AAAA,UACA,YAAY;AAAA,QAAA;AAAA,MACd;AAAA,MAVK;AAAA,IAYR,CAAA,GACH;AAAA,IACC,SAASA,kCAAA,IAAC,QAAO,EAAA,WAAU,MAAM,UAAM,MAAA,CAAA;AAAA,EAAA,GAC1C;AAEJ,CAAC;AAED,SAAS,gBAAgB,SAAiB;AACxC,UAAQ,MAAM;AAAA,IACZ,KAAK,UAAU;AACb,aAAO,EAAE,OAAO,OAAO,cAAc,MAAM;AAAA,IAC7C,KAAK,UAAU;AACb,aAAO,EAAE,OAAO,UAAU,cAAc,SAAS;AAAA,IACnD;AACE,aAAO,EAAE,OAAO,QAAQ,cAAc,QAAQ;AAAA,EAAA;AAEpD;"}