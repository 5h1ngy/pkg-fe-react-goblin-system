{"version":3,"file":"file-button.mjs","sources":["../../../../src/components/Factory/Chakra/file-button.tsx"],"sourcesContent":["\r\n\r\nimport type { ButtonProps, RecipeProps } from \"@chakra-ui/react\"\r\nimport {\r\n  Button,\r\n  FileUpload as ChakraFileUpload,\r\n  Icon,\r\n  IconButton,\r\n  Span,\r\n  Text,\r\n  useFileUploadContext,\r\n  useRecipe,\r\n} from \"@chakra-ui/react\"\r\nimport { forwardRef } from \"react\"\r\nimport { LuFile, LuUpload, LuX } from \"react-icons/lu\"\r\n\r\nexport interface FileUploadRootProps extends ChakraFileUpload.RootProps {\r\n  inputProps?: React.InputHTMLAttributes<HTMLInputElement>\r\n}\r\n\r\nexport const FileUploadRoot = forwardRef<HTMLInputElement, FileUploadRootProps>(\r\n  function FileUploadRoot(props, ref) {\r\n    const { children, inputProps, ...rest } = props\r\n    return (\r\n      <ChakraFileUpload.Root {...rest}>\r\n        <ChakraFileUpload.HiddenInput ref={ref} {...inputProps} />\r\n        {children}\r\n      </ChakraFileUpload.Root>\r\n    )\r\n  },\r\n)\r\n\r\nexport interface FileUploadDropzoneProps\r\n  extends ChakraFileUpload.DropzoneProps {\r\n  label: React.ReactNode\r\n  description?: React.ReactNode\r\n}\r\n\r\nexport const FileUploadDropzone = forwardRef<\r\n  HTMLInputElement,\r\n  FileUploadDropzoneProps\r\n>(function FileUploadDropzone(props, ref) {\r\n  const { children, label, description, ...rest } = props\r\n  return (\r\n    <ChakraFileUpload.Dropzone ref={ref} {...rest}>\r\n      <Icon fontSize=\"xl\" color=\"fg.muted\">\r\n        <LuUpload />\r\n      </Icon>\r\n      <ChakraFileUpload.DropzoneContent>\r\n        <div>{label}</div>\r\n        {description && <Text color=\"fg.muted\">{description}</Text>}\r\n      </ChakraFileUpload.DropzoneContent>\r\n      {children}\r\n    </ChakraFileUpload.Dropzone>\r\n  )\r\n})\r\n\r\ninterface VisibilityProps {\r\n  showSize?: boolean\r\n  clearable?: boolean\r\n}\r\n\r\ninterface FileUploadItemProps extends VisibilityProps {\r\n  file: File\r\n}\r\n\r\nconst FileUploadItem = (props: FileUploadItemProps) => {\r\n  const { file, showSize, clearable } = props\r\n  return (\r\n    <ChakraFileUpload.Item file={file}>\r\n      <ChakraFileUpload.ItemPreview asChild>\r\n        <Icon fontSize=\"lg\" color=\"fg.muted\">\r\n          <LuFile />\r\n        </Icon>\r\n      </ChakraFileUpload.ItemPreview>\r\n\r\n      {showSize ? (\r\n        <ChakraFileUpload.ItemContent>\r\n          <ChakraFileUpload.ItemName />\r\n          <ChakraFileUpload.ItemSizeText />\r\n        </ChakraFileUpload.ItemContent>\r\n      ) : (\r\n        <ChakraFileUpload.ItemName flex=\"1\" />\r\n      )}\r\n\r\n      {clearable && (\r\n        <ChakraFileUpload.ItemDeleteTrigger asChild>\r\n          <IconButton variant=\"ghost\" color=\"fg.muted\" size=\"xs\">\r\n            <LuX />\r\n          </IconButton>\r\n        </ChakraFileUpload.ItemDeleteTrigger>\r\n      )}\r\n    </ChakraFileUpload.Item>\r\n  )\r\n}\r\n\r\ninterface FileUploadListProps\r\n  extends VisibilityProps,\r\n    ChakraFileUpload.ItemGroupProps {\r\n  files?: File[]\r\n}\r\n\r\nexport const FileUploadList = forwardRef<HTMLUListElement, FileUploadListProps>(\r\n  function FileUploadList(props, ref) {\r\n    const { showSize, clearable, files, ...rest } = props\r\n\r\n    const fileUpload = useFileUploadContext()\r\n    const acceptedFiles = files ?? fileUpload.acceptedFiles\r\n\r\n    if (acceptedFiles.length === 0) return null\r\n\r\n    return (\r\n      <ChakraFileUpload.ItemGroup ref={ref} {...rest}>\r\n        {acceptedFiles.map((file) => (\r\n          <FileUploadItem\r\n            key={file.name}\r\n            file={file}\r\n            showSize={showSize}\r\n            clearable={clearable}\r\n          />\r\n        ))}\r\n      </ChakraFileUpload.ItemGroup>\r\n    )\r\n  },\r\n)\r\n\r\ntype Assign<T, U> = Omit<T, keyof U> & U\r\n\r\ninterface FileInputProps extends Assign<ButtonProps, RecipeProps<\"input\">> {\r\n  placeholder?: React.ReactNode\r\n}\r\n\r\nexport const FileInput = forwardRef<HTMLButtonElement, FileInputProps>(\r\n  function FileInput(props, ref) {\r\n    const inputRecipe = useRecipe({ key: \"input\" })\r\n    const [recipeProps, restProps] = inputRecipe.splitVariantProps(props)\r\n    const { placeholder = \"Select file(s)\", ...rest } = restProps\r\n    return (\r\n      <ChakraFileUpload.Trigger asChild>\r\n        <Button\r\n          unstyled\r\n          py=\"0\"\r\n          ref={ref}\r\n          {...rest}\r\n          css={[inputRecipe(recipeProps), props.css]}\r\n        >\r\n          <ChakraFileUpload.Context>\r\n            {({ acceptedFiles }) => {\r\n              if (acceptedFiles.length === 1) {\r\n                return <span>{acceptedFiles[0].name}</span>\r\n              }\r\n              if (acceptedFiles.length > 1) {\r\n                return <span>{acceptedFiles.length} files</span>\r\n              }\r\n              return <Span color=\"fg.subtle\">{placeholder}</Span>\r\n            }}\r\n          </ChakraFileUpload.Context>\r\n        </Button>\r\n      </ChakraFileUpload.Trigger>\r\n    )\r\n  },\r\n)\r\n\r\nexport const FileUploadLabel = ChakraFileUpload.Label\r\nexport const FileUploadClearTrigger = ChakraFileUpload.ClearTrigger\r\nexport const FileUploadTrigger = ChakraFileUpload.Trigger\r\n"],"names":["FileUploadRoot","forwardRef","props","ref","children","inputProps","rest","jsxs","ChakraFileUpload","jsx","FileUploadDropzone","label","description","Icon","LuUpload","Text","FileUploadItem","file","showSize","clearable","LuFile","IconButton","LuX","FileUploadList","files","fileUpload","useFileUploadContext","acceptedFiles","FileInput","inputRecipe","useRecipe","recipeProps","restProps","placeholder","Button","Span","FileUploadLabel","FileUploadClearTrigger","FileUploadTrigger"],"mappings":"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"}