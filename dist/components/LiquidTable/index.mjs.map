{"version":3,"file":"index.mjs","sources":["../../../src/components/LiquidTable/shared/utils.ts","../../../src/components/LiquidTable/shared/Provider.tsx","../../../src/components/LiquidTable/shared/hooks.tsx","../../../src/components/LiquidTable/Header.tsx","../../../src/components/LiquidTable/Body.tsx","../../../src/components/LiquidTable/Pagination.tsx","../../../src/components/LiquidTable/ActionBar.tsx","../../../src/components/LiquidTable/LiquidTable.tsx","../../../src/components/LiquidTable/index.ts"],"sourcesContent":["import { ParsedColumn, ParsedRow, ParsedTableData } from \"../liquidTable.types\";\r\n\r\n/**\r\n * Trasforma una stringa camelCase in una forma \"First Name\".\r\n * - La prima lettera viene messa maiuscola.\r\n * - Eventuali ulteriori lettere maiuscole vengono precedute da uno spazio.\r\n */\r\nfunction prettifyFieldName(fieldName: string): string {\r\n    if (!fieldName) return \"\";\r\n\r\n    // 1. Inserisce uno spazio prima di ogni lettera maiuscola (tranne la prima).\r\n    //    Esempio: \"firstName\" -> \"first Name\"\r\n    //    Poi la prima lettera verrà capitalizzata nel passo successivo.\r\n    let spaced = fieldName.replace(/([A-Z])/g, \" $1\");\r\n\r\n    // 2. Trim per rimuovere eventuali spazi iniziali\r\n    spaced = spaced.trim();\r\n\r\n    // 3. Capitalizza la prima lettera dell'intera stringa\r\n    return spaced.charAt(0).toUpperCase() + spaced.slice(1);\r\n}\r\n\r\nexport function parseItems(items: Record<string, any>[], hiddenFields: string[] = []): ParsedTableData {\r\n    if (!items || items.length === 0) {\r\n        return { columns: [], rows: [] };\r\n    }\r\n\r\n    const allFields = new Set<string>();\r\n    items.forEach((obj) => {\r\n        Object.keys(obj).forEach((key) => allFields.add(key));\r\n    });\r\n\r\n    const columns: ParsedColumn[] = Array.from(allFields).map((fieldKey) => {\r\n        const shouldHide = hiddenFields.includes(fieldKey);\r\n\r\n        return { field: fieldKey, label: prettifyFieldName(fieldKey), visible: !shouldHide, isNumeric: false, };\r\n    });\r\n\r\n    // Creiamo le righe\r\n    const rows: ParsedRow[] = items.map((item, index) => ({\r\n        id: item.id ?? String(index),\r\n        data: item,\r\n    }));\r\n\r\n    return { columns, rows };\r\n}","import React, { createContext, useState, FC } from 'react';\r\nimport { parseItems } from './utils';\r\nimport { ComponentProps, ContextType } from '../liquidTable.types';\r\n\r\nexport const Context = createContext<ContextType | undefined>(undefined);\r\n\r\nconst withContext = <P extends object>(WrappedComponent: React.ComponentType<P>): FC<ComponentProps & P> => {\r\n  const Provider: FC<ComponentProps & P> = (props) => {\r\n    const { columns, rows } = parseItems(props.items, props.hiddenFields);\r\n    const [selection, setSelection] = useState<string[]>([]);\r\n\r\n    return (\r\n      <Context.Provider\r\n        value={{\r\n          columns,\r\n          rows,\r\n          pagination: props.pagination,\r\n          select: { selection, setSelection },\r\n        }}\r\n      >\r\n        <WrappedComponent {...props} />\r\n      </Context.Provider>\r\n    );\r\n  };\r\n\r\n  return Provider;\r\n};\r\n\r\nexport default withContext;\r\n","import { useContext } from \"react\";\r\nimport { ContextType } from \"../liquidTable.types\";\r\nimport { Context } from \"./Provider\";\r\n\r\nexport const useTableContext = (): ContextType => {\r\n    const context = useContext(Context);\r\n    if (!context) {\r\n        throw new Error('useTableContext must be used within LiquidTable');\r\n    }\r\n\r\n    return context;\r\n};","import { FC } from \"react\";\r\nimport { Table } from \"@chakra-ui/react\"\r\n\r\nimport { Checkbox } from \"@/components/Factory/Chakra/checkbox\";\r\n\r\nimport { useTableContext } from \"./shared/hooks\";\r\n\r\nconst DynamicTable: FC = () => {\r\n    const { columns, rows, select } = useTableContext();\r\n\r\n    const hasSelection = select.selection.length > 0;\r\n    const indeterminate = hasSelection && select.selection.length < rows.length;\r\n\r\n    return <Table.Header>\r\n        <Table.Row bg=\"bg.subtle\">\r\n            <Table.ColumnHeader w=\"6\">\r\n                <Checkbox\r\n                    top=\"1\" aria-label=\"Select all rows\"\r\n                    checked={indeterminate ? \"indeterminate\" : select.selection.length > 0}\r\n                    onCheckedChange={(changes: { checked: boolean }) => changes.checked\r\n                        ? select.setSelection(rows.map((row) => row.id))\r\n                        : select.setSelection([])\r\n                    }\r\n                />\r\n            </Table.ColumnHeader>\r\n\r\n            {/* Colonne dinamiche (filtrando quelle visibili) */}\r\n            {columns.filter((col) => col.visible).map((col) =>\r\n                <Table.ColumnHeader key={crypto.randomUUID()}\r\n                    textAlign={col.isNumeric ? \"end\" : \"start\"}\r\n                >\r\n                    {col.label}\r\n                </Table.ColumnHeader>\r\n            )}\r\n        </Table.Row>\r\n    </Table.Header>\r\n};\r\n\r\nexport default DynamicTable;\r\n","import { FC } from \"react\";\r\nimport { Table } from \"@chakra-ui/react\"\r\n\r\nimport { Checkbox } from \"@/components/Factory/Chakra/checkbox\";\r\nimport { useTableContext } from \"./shared/hooks\";\r\n\r\nconst DynamicTable: FC = () => {\r\n    const { columns, rows, select } = useTableContext();\r\n\r\n    return <Table.Body>\r\n        {rows.map((row) => (\r\n            <Table.Row key={crypto.randomUUID()}>\r\n                <Table.Cell>\r\n                    <Checkbox\r\n                        top=\"1\"\r\n                        aria-label=\"Select row\"\r\n                        checked={select.selection.includes(row.id)}\r\n                        onCheckedChange={(changes: { checked: boolean }) => select.setSelection((prev) => changes.checked\r\n                            ? [...prev, row.id]\r\n                            : prev.filter((id) => id !== row.id))\r\n                        }\r\n                    />\r\n                </Table.Cell>\r\n\r\n                {/* Celle dinamiche per ogni colonna visibile */}\r\n                {columns\r\n                    .filter((col) => col.visible)\r\n                    .map((col) =>\r\n                        <Table.Cell key={crypto.randomUUID()}\r\n                            textAlign={col.isNumeric ? \"end\" : \"start\"}\r\n                        >\r\n                            {row.data[col.field] == null ? \"/\" : row.data[col.field]}\r\n                        </Table.Cell>\r\n                    )}\r\n            </Table.Row>\r\n        ))}\r\n    </Table.Body>\r\n};\r\n\r\nexport default DynamicTable;\r\n","import { FC } from \"react\";\r\nimport { HStack } from \"@chakra-ui/react\"\r\n\r\nimport { PaginationItems, PaginationNextTrigger, PaginationPrevTrigger, PaginationRoot, } from \"@/components/Factory/Chakra/pagination\"\r\n\r\nimport { useTableContext } from \"./shared/hooks\";\r\n\r\nconst Pagination: FC = () => {\r\n    const { pagination } = useTableContext();\r\n\r\n    return pagination && <PaginationRoot\r\n        padding={\"0.3rem\"}\r\n        count={pagination.totalPages}\r\n        width={\"fit-content\"}\r\n        pageSize={pagination.size}\r\n        page={pagination.offset}\r\n        borderRadius={\"10px\"}\r\n        backgroundColor=\"gray.100\"\r\n        _dark={{ backgroundColor: \"gray.950\" }}\r\n    >\r\n        <HStack wrap=\"wrap\">\r\n            <PaginationPrevTrigger />\r\n            <PaginationItems />\r\n            <PaginationNextTrigger />\r\n        </HStack>\r\n    </PaginationRoot>\r\n};\r\n\r\nexport default Pagination;\r\n","import { FC, useEffect } from \"react\";\r\nimport { Kbd } from \"@chakra-ui/react\"\r\n\r\nimport { Button } from \"@/components/Factory/Chakra/button\";\r\nimport { ActionBarContent, ActionBarRoot, ActionBarSelectionTrigger, ActionBarSeparator, } from \"@/components/Factory/Chakra/action-bar\";\r\n\r\nimport { useTableContext } from \"./shared/hooks\";\r\n\r\nconst DynamicTable: FC = () => {\r\n    const { select } = useTableContext();\r\n    const hasSelection = select.selection.length > 0;\r\n\r\n    useEffect(() => {\r\n        const elements = document.getElementsByClassName(\"chakra-action-bar__positioner\");\r\n        for (let i = 0; i < elements.length; i++) {\r\n            (elements[i] as HTMLElement).style.zIndex = \"9999\";\r\n        }\r\n    }, []);\r\n\r\n    return <ActionBarRoot open={hasSelection}>\r\n        <ActionBarContent>\r\n            <ActionBarSelectionTrigger>\r\n                {select.selection.length} selected\r\n            </ActionBarSelectionTrigger>\r\n            <ActionBarSeparator />\r\n            <Button variant=\"outline\" size=\"sm\">\r\n                Delete <Kbd>⌫</Kbd>\r\n            </Button>\r\n            <Button variant=\"outline\" size=\"sm\">\r\n                Share <Kbd>T</Kbd>\r\n            </Button>\r\n        </ActionBarContent>\r\n    </ActionBarRoot>\r\n};\r\n\r\nexport default DynamicTable;\r\n","import { FC } from \"react\";\r\nimport { Stack } from \"@chakra-ui/react\"\r\nimport { Table } from \"@chakra-ui/react\"\r\n\r\nimport Header from \"./Header\";\r\nimport Body from \"./Body\";\r\nimport Pagination from \"./Pagination\";\r\nimport ActionBar from \"./ActionBar\";\r\n\r\nconst LiquidTable: FC = () => {\r\n\r\n    return (\r\n        <Stack width=\"full\" gap=\"3\" alignItems={\"flex-end\"}>\r\n\r\n            <Pagination />\r\n\r\n            <Table.ScrollArea borderWidth=\"1px\" rounded=\"md\" width=\"100%\" height=\"100%\">\r\n                <Table.Root size=\"lg\" stickyHeader interactive>\r\n                    <Header />\r\n                    <Body />\r\n                </Table.Root>\r\n            </Table.ScrollArea>\r\n\r\n            <ActionBar />\r\n        </Stack>\r\n    );\r\n};\r\n\r\nexport default LiquidTable;\r\n","import withContext from \"./shared/Provider\";\r\nimport LiquidTable from \"./LiquidTable\";\r\n\r\nexport default withContext(LiquidTable);"],"names":["index","jsx","DynamicTable","jsxs","Header","Body","ActionBar"],"mappings":"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"}